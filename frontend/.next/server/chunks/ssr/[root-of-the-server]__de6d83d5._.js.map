{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/aviasnani/Desktop/computer%20demo/cs-demo/repo/frontend/src/firebase.config.js"],"sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getAuth, GoogleAuthProvider, GithubAuthProvider } from \"firebase/auth\";\n\n\n\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID\n};\n\nconst app = initializeApp(firebaseConfig);\n\n// Firebase Authentication setup\nconst auth = getAuth(app);\nconst googleProvider = new GoogleAuthProvider();\nconst githubProvider = new GithubAuthProvider();\n\nexport { auth, googleProvider, githubProvider };"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;;;AAKA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,MAAM,MAAM,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE;AAE1B,gCAAgC;AAChC,MAAM,OAAO,CAAA,GAAA,6MAAA,CAAA,UAAO,AAAD,EAAE;AACrB,MAAM,iBAAiB,IAAI,wNAAA,CAAA,qBAAkB;AAC7C,MAAM,iBAAiB,IAAI,wNAAA,CAAA,qBAAkB","debugId":null}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/aviasnani/Desktop/computer%20demo/cs-demo/repo/frontend/src/services/firebaseAuth.js"],"sourcesContent":["import { signInWithPopup, GithubAuthProvider } from 'firebase/auth';\nimport { auth } from '../firebase.config';\n\nclass FirebaseAuthService {\n  async signInWithGitHub() {\n    try {\n      const provider = new GithubAuthProvider();\n      provider.addScope('user:username');\n      provider.addScope('public_repo');\n      provider.addScope('write:public_key'); // ðŸ‘ˆ necessary!\n\n      const result = await signInWithPopup(auth, provider);\n\n      const githubUsername = \n        result?.additionalUserInfo?.profile?.login ||\n        result?.additionalUserInfo?.username ||\n        result?.user?.reloadUserInfo?.screenName ||\n        result?.user?.providerData?.[0]?.displayName ||\n        result?.user?.displayName;\n\n      if (!githubUsername) {\n        throw new Error('Could not determine GitHub username from login');\n      }\n\n      const credential = GithubAuthProvider.credentialFromResult(result);\n      const githubToken = credential.accessToken;\n      const idToken = await result.user.getIdToken();\n\n      // Store basic data\n      localStorage.setItem('github_username', githubUsername);\n\n      const response = await fetch('http://localhost:5000/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({ firebase_token: idToken })\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Backend error: ${response.status} - ${errorText}`);\n      }\n\n      const userData = await response.json();\n\n      return {\n        user: userData,\n        githubToken,\n        firebaseToken: idToken\n      };\n    } catch (error) {\n      console.error('GitHub sign-in failed:', error);\n      throw new Error(`GitHub sign-in failed: ${error.message}`);\n    }\n  }\n\n  async signOut() {\n    try {\n      await auth.signOut();\n      localStorage.removeItem('github_token');\n      localStorage.removeItem('private_key');\n    } catch (error) {\n      console.error('Sign out failed:', error);\n    }\n  }\n}\n\nexport default new FirebaseAuthService();\n"],"names":[],"mappings":";;;AAAA;AAAA;AAAA;AACA;;;AAEA,MAAM;IACJ,MAAM,mBAAmB;QACvB,IAAI;YACF,MAAM,WAAW,IAAI,wNAAA,CAAA,qBAAkB;YACvC,SAAS,QAAQ,CAAC;YAClB,SAAS,QAAQ,CAAC;YAClB,SAAS,QAAQ,CAAC,qBAAqB,gBAAgB;YAEvD,MAAM,SAAS,MAAM,CAAA,GAAA,qNAAA,CAAA,kBAAe,AAAD,EAAE,yHAAA,CAAA,OAAI,EAAE;YAE3C,MAAM,iBACJ,QAAQ,oBAAoB,SAAS,SACrC,QAAQ,oBAAoB,YAC5B,QAAQ,MAAM,gBAAgB,cAC9B,QAAQ,MAAM,cAAc,CAAC,EAAE,EAAE,eACjC,QAAQ,MAAM;YAEhB,IAAI,CAAC,gBAAgB;gBACnB,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,aAAa,wNAAA,CAAA,qBAAkB,CAAC,oBAAoB,CAAC;YAC3D,MAAM,cAAc,WAAW,WAAW;YAC1C,MAAM,UAAU,MAAM,OAAO,IAAI,CAAC,UAAU;YAE5C,mBAAmB;YACnB,aAAa,OAAO,CAAC,mBAAmB;YAExC,MAAM,WAAW,MAAM,MAAM,wCAAwC;gBACnE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,aAAa;gBACb,MAAM,KAAK,SAAS,CAAC;oBAAE,gBAAgB;gBAAQ;YACjD;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI;gBACrC,MAAM,IAAI,MAAM,CAAC,eAAe,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,WAAW;YACpE;YAEA,MAAM,WAAW,MAAM,SAAS,IAAI;YAEpC,OAAO;gBACL,MAAM;gBACN;gBACA,eAAe;YACjB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;YACxC,MAAM,IAAI,MAAM,CAAC,uBAAuB,EAAE,MAAM,OAAO,EAAE;QAC3D;IACF;IAEA,MAAM,UAAU;QACd,IAAI;YACF,MAAM,yHAAA,CAAA,OAAI,CAAC,OAAO;YAClB,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;QAC1B,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,oBAAoB;QACpC;IACF;AACF;uCAEe,IAAI","debugId":null}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///Users/aviasnani/Desktop/computer%20demo/cs-demo/repo/frontend/src/services/gitHubService.js"],"sourcesContent":["// githubKeyService.js\nimport sshpk from 'sshpk';\n\nclass GitHubKeyService {\n  async uploadPublicKey(publicKeyPem, githubToken, keyTitle = 'SecureChat Key') {\n    try {\n      const sshKey = this.convertPEMtoSSH(publicKeyPem); \n\n      const response = await fetch('https://api.github.com/user/keys', {\n        method: 'POST',\n        headers: {\n          'Authorization': `token ${githubToken}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          title: `${keyTitle} - ${new Date().toISOString().split('T')[0]}`,\n          key: sshKey\n        })\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(`GitHub API error: ${response.status} - ${error.message}`);\n      }\n\n      const keyData = await response.json();\n      console.log(' Public key uploaded to GitHub:', keyData.id);\n      return keyData;\n\n    } catch (error) {\n      console.error(' Failed to upload key to GitHub:', error);\n      throw error;\n    }\n  }\n\n  async fetchUserPublicKeys(githubUsername) {\n    console.log('[GITHUB] Fetching SSH keys for GitHub user:', githubUsername);\n    const url = `https://api.github.com/users/${githubUsername}/keys`;\n    console.log('[GITHUB] API URL:', url);\n\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: { 'Accept': 'application/vnd.github+json' }\n    });\n\n    console.log('[GITHUB] Response status:', response.status);\n    \n    if (!response.ok) {\n      if (response.status === 404) {\n        console.error(' [GITHUB] User not found or has no public SSH keys');\n        throw new Error(`GitHub user '${githubUsername}' not found or has no public SSH keys`);\n      }\n      throw new Error(`GitHub responded with ${response.status}`);\n    }\n\n    const keysData = await response.json();\n    console.log('[GITHUB] Found', keysData.length, 'SSH keys');\n    console.log(' [GITHUB] Keys data:', keysData);\n    \n    const rsaKeys = keysData\n      .map(k => k.key)\n      .filter(key => key.startsWith('ssh-rsa'));\n      \n    console.log('[GITHUB] RSA keys found:', rsaKeys.length);\n    \n    if (rsaKeys.length === 0) {\n      throw new Error(`GitHub user '${githubUsername}' has no RSA SSH keys`);\n    }\n    \n    return rsaKeys;\n  }\n\n  convertSSHtoPEM(sshKey) {\n    try {\n      const key = sshpk.parseKey(sshKey, 'ssh');\n      return key.toString('pem');\n    } catch (error) {\n      throw new Error(`Failed to convert SSH to PEM: ${error.message}`);\n    }\n  }\n\n  convertPEMtoSSH(pemKey) {\n    try {\n      const key = sshpk.parseKey(pemKey, 'pem');\n      return key.toString('ssh');\n    } catch (error) {\n      throw new Error(`Failed to convert PEM to SSH: ${error.message}`);\n    }\n  }\n}\n\nexport default new GitHubKeyService();"],"names":[],"mappings":"AAAA,sBAAsB;;;;AACtB;;AAEA,MAAM;IACJ,MAAM,gBAAgB,YAAY,EAAE,WAAW,EAAE,WAAW,gBAAgB,EAAE;QAC5E,IAAI;YACF,MAAM,SAAS,IAAI,CAAC,eAAe,CAAC;YAEpC,MAAM,WAAW,MAAM,MAAM,oCAAoC;gBAC/D,QAAQ;gBACR,SAAS;oBACP,iBAAiB,CAAC,MAAM,EAAE,aAAa;oBACvC,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;oBACnB,OAAO,GAAG,SAAS,GAAG,EAAE,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE;oBAChE,KAAK;gBACP;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,QAAQ,MAAM,SAAS,IAAI;gBACjC,MAAM,IAAI,MAAM,CAAC,kBAAkB,EAAE,SAAS,MAAM,CAAC,GAAG,EAAE,MAAM,OAAO,EAAE;YAC3E;YAEA,MAAM,UAAU,MAAM,SAAS,IAAI;YACnC,QAAQ,GAAG,CAAC,mCAAmC,QAAQ,EAAE;YACzD,OAAO;QAET,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,oCAAoC;YAClD,MAAM;QACR;IACF;IAEA,MAAM,oBAAoB,cAAc,EAAE;QACxC,QAAQ,GAAG,CAAC,+CAA+C;QAC3D,MAAM,MAAM,CAAC,6BAA6B,EAAE,eAAe,KAAK,CAAC;QACjE,QAAQ,GAAG,CAAC,qBAAqB;QAEjC,MAAM,WAAW,MAAM,MAAM,KAAK;YAChC,QAAQ;YACR,SAAS;gBAAE,UAAU;YAA8B;QACrD;QAEA,QAAQ,GAAG,CAAC,6BAA6B,SAAS,MAAM;QAExD,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,IAAI,SAAS,MAAM,KAAK,KAAK;gBAC3B,QAAQ,KAAK,CAAC;gBACd,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,eAAe,qCAAqC,CAAC;YACvF;YACA,MAAM,IAAI,MAAM,CAAC,sBAAsB,EAAE,SAAS,MAAM,EAAE;QAC5D;QAEA,MAAM,WAAW,MAAM,SAAS,IAAI;QACpC,QAAQ,GAAG,CAAC,kBAAkB,SAAS,MAAM,EAAE;QAC/C,QAAQ,GAAG,CAAC,wBAAwB;QAEpC,MAAM,UAAU,SACb,GAAG,CAAC,CAAA,IAAK,EAAE,GAAG,EACd,MAAM,CAAC,CAAA,MAAO,IAAI,UAAU,CAAC;QAEhC,QAAQ,GAAG,CAAC,4BAA4B,QAAQ,MAAM;QAEtD,IAAI,QAAQ,MAAM,KAAK,GAAG;YACxB,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,eAAe,qBAAqB,CAAC;QACvE;QAEA,OAAO;IACT;IAEA,gBAAgB,MAAM,EAAE;QACtB,IAAI;YACF,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,QAAQ,CAAC,QAAQ;YACnC,OAAO,IAAI,QAAQ,CAAC;QACtB,EAAE,OAAO,OAAO;YACd,MAAM,IAAI,MAAM,CAAC,8BAA8B,EAAE,MAAM,OAAO,EAAE;QAClE;IACF;IAEA,gBAAgB,MAAM,EAAE;QACtB,IAAI;YACF,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,QAAQ,CAAC,QAAQ;YACnC,OAAO,IAAI,QAAQ,CAAC;QACtB,EAAE,OAAO,OAAO;YACd,MAAM,IAAI,MAAM,CAAC,8BAA8B,EAAE,MAAM,OAAO,EAAE;QAClE;IACF;AACF;uCAEe,IAAI","debugId":null}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///Users/aviasnani/Desktop/computer%20demo/cs-demo/repo/frontend/src/utils/manualKeyUpload.js"],"sourcesContent":["// Manual key upload utility for testing\nimport githubKeyService from '../services/gitHubService';\nimport CryptoService from '../services/cryptoService';\n\nexport async function manualKeyUpload() {\n  try {\n    const githubToken = localStorage.getItem('github_token');\n    const githubUsername = localStorage.getItem('github_username');\n    \n    if (!githubToken) {\n      throw new Error('No GitHub token found. Please login first.');\n    }\n    \n    console.log('ðŸ”‘ [MANUAL] Starting manual key upload...');\n    console.log('ðŸ”‘ [MANUAL] GitHub username:', githubUsername);\n    console.log('ðŸ”‘ [MANUAL] GitHub token available:', !!githubToken);\n    \n    // Generate new key pair\n    const keyPair = await CryptoService.generateRSAKeyPair();\n    console.log('ðŸ”‘ [MANUAL] Generated new RSA key pair');\n    \n    // Store private key\n    localStorage.setItem('private_key', keyPair.privateKey);\n    console.log('ðŸ”‘ [MANUAL] Stored private key locally');\n    \n    // Upload public key to GitHub\n    const uploadResult = await githubKeyService.uploadPublicKey(keyPair.publicKey, githubToken, 'Manual SecureChat Key');\n    console.log('ðŸ”‘ [MANUAL] âœ… Key uploaded successfully:', uploadResult.id);\n    \n    // Verify upload\n    const keys = await githubKeyService.fetchUserPublicKeys(githubUsername);\n    console.log('ðŸ”‘ [MANUAL] âœ… Verification: Found', keys.length, 'SSH keys on GitHub');\n    \n    return { success: true, keyId: uploadResult.id, totalKeys: keys.length };\n    \n  } catch (error) {\n    console.error('ðŸ”‘ [MANUAL] âŒ Manual key upload failed:', error);\n    throw error;\n  }\n}\n\n// Add to window for easy testing\nif (typeof window !== 'undefined') {\n  window.manualKeyUpload = manualKeyUpload;\n}"],"names":[],"mappings":"AAAA,wCAAwC;;;;AACxC;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,cAAc,aAAa,OAAO,CAAC;QACzC,MAAM,iBAAiB,aAAa,OAAO,CAAC;QAE5C,IAAI,CAAC,aAAa;YAChB,MAAM,IAAI,MAAM;QAClB;QAEA,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,gCAAgC;QAC5C,QAAQ,GAAG,CAAC,uCAAuC,CAAC,CAAC;QAErD,wBAAwB;QACxB,MAAM,UAAU,MAAM,gIAAA,CAAA,UAAa,CAAC,kBAAkB;QACtD,QAAQ,GAAG,CAAC;QAEZ,oBAAoB;QACpB,aAAa,OAAO,CAAC,eAAe,QAAQ,UAAU;QACtD,QAAQ,GAAG,CAAC;QAEZ,8BAA8B;QAC9B,MAAM,eAAe,MAAM,gIAAA,CAAA,UAAgB,CAAC,eAAe,CAAC,QAAQ,SAAS,EAAE,aAAa;QAC5F,QAAQ,GAAG,CAAC,4CAA4C,aAAa,EAAE;QAEvE,gBAAgB;QAChB,MAAM,OAAO,MAAM,gIAAA,CAAA,UAAgB,CAAC,mBAAmB,CAAC;QACxD,QAAQ,GAAG,CAAC,qCAAqC,KAAK,MAAM,EAAE;QAE9D,OAAO;YAAE,SAAS;YAAM,OAAO,aAAa,EAAE;YAAE,WAAW,KAAK,MAAM;QAAC;IAEzE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2CAA2C;QACzD,MAAM;IACR;AACF;AAEA,iCAAiC;AACjC,uCAAmC;;AAEnC","debugId":null}},
    {"offset": {"line": 275, "column": 0}, "map": {"version":3,"sources":["file:///Users/aviasnani/Desktop/computer%20demo/cs-demo/repo/frontend/src/services/authService.js"],"sourcesContent":["import firebaseAuthService from './firebaseAuth';\nimport githubKeyService from './gitHubService';\nimport CryptoService from './cryptoService';\nimport { manualKeyUpload } from '../utils/manualKeyUpload';\n\nclass AuthService {\n  async loginWithGitHub() {\n    try {\n      console.log('Starting GitHub OAuth login...');\n      \n      // 1. Firebase GitHub OAuth\n      const { user, githubToken, firebaseToken } = await firebaseAuthService.signInWithGitHub();\n      \n      if (user.status === 'error') {\n        throw new Error(user.message);\n      }\n      \n      console.log('GitHub OAuth successful:', user.data.github_username);\n      \n      // 2. Generate RSA keys\n      console.log('Generating RSA key pair...');\n      const keyPair = await CryptoService.generateRSAKeyPair();\n      \n      // 3. Store private key locally\n      localStorage.setItem('private_key', keyPair.privateKey);\n      localStorage.setItem('github_username', user.data.github_username);\n      localStorage.setItem('github_token', githubToken);\n      localStorage.setItem('user_data', JSON.stringify(user.data));\n      \n      // 4. Upload public key to GitHub\n      if (user.data.github_username && githubToken) {\n        console.log('[AUTH] Uploading public key to GitHub for user:', user.data.github_username);\n        console.log('[AUTH] GitHub token available:', !!githubToken);\n        console.log('[AUTH] Public key preview:', keyPair.publicKey.substring(0, 50) + '...');\n        \n        let uploadSuccess = false;\n        \n        try {\n          const uploadResult = await githubKeyService.uploadPublicKey(keyPair.publicKey, githubToken);\n          console.log('[AUTH] Public key uploaded successfully:', uploadResult.id);\n          uploadSuccess = true;\n          \n        } catch (keyError) {\n          console.error('[AUTH] Upload failed:', keyError.message);\n          \n          // If upload fails, try with a fresh token\n          try {\n            console.log('[AUTH] Retrying with fresh token...');\n            const newAuth = await firebaseAuthService.signInWithGitHub();\n            const freshToken = newAuth.githubToken;\n            \n            if (freshToken !== githubToken) {\n              const retryResult = await githubKeyService.uploadPublicKey(keyPair.publicKey, freshToken);\n              console.log('[AUTH] Retry successful:', retryResult.id);\n              localStorage.setItem('github_token', freshToken);\n              uploadSuccess = true;\n            }\n          } catch (retryError) {\n            console.error('[AUTH] Retry failed:', retryError.message);\n          }\n        }\n        \n        // Verify upload worked\n        if (uploadSuccess) {\n          setTimeout(async () => {\n            try {\n              const keys = await githubKeyService.fetchUserPublicKeys(user.data.github_username);\n              console.log('[AUTH] Verified:', keys.length, 'SSH keys on GitHub');\n            } catch (verifyError) {\n              console.error('[AUTH]  Verification failed - key may not be uploaded');\n            }\n          }, 1000);\n        } else {\n          console.error(' [AUTH]  SSH key upload completely failed');\n        }\n      } else {\n        console.warn('[AUTH] Missing GitHub username or token for key upload');\n        console.log('[AUTH] user.data.github_username:', user.data.github_username);\n        console.log('[AUTH] githubToken:', !!githubToken);\n      }\n      \n      return {\n        success: true,\n        user: {\n          ...user.data,\n          uid: String(user.data.id)\n        },\n        message: 'Login successful'\n      };\n      \n    } catch (error) {\n      console.error('GitHub login failed:', error);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  }\n  \n  async logout() {\n    try {\n      await firebaseAuthService.signOut();\n      \n      // Clear all stored data\n      localStorage.removeItem('private_key');\n      localStorage.removeItem('github_username');\n      localStorage.removeItem('github_token');\n      localStorage.removeItem('user_data');\n      \n      return { success: true };\n    } catch (error) {\n      console.error('Logout failed:', error);\n      return { success: false, error: error.message };\n    }\n  }\n  \n  getCurrentUser() {\n    try {\n      const userData = localStorage.getItem('user_data');\n      return userData ? JSON.parse(userData) : null;\n    } catch (error) {\n      console.error('Failed to get current user:', error);\n      return null;\n    }\n  }\n  \n  isAuthenticated() {\n    return !!this.getCurrentUser();\n  }\n  \n  getGitHubToken() {\n    return localStorage.getItem('github_token');\n  }\n  \n  getPrivateKey() {\n    return localStorage.getItem('private_key');\n  }\n  \n  // Manual key upload for testing\n  async manualKeyUpload() {\n    return await manualKeyUpload();\n  }\n}\n\nconst authService = new AuthService();\nexport default authService;"],"names":[],"mappings":";;;AAAA;AACA;AACA;AACA;;;;;AAEA,MAAM;IACJ,MAAM,kBAAkB;QACtB,IAAI;YACF,QAAQ,GAAG,CAAC;YAEZ,2BAA2B;YAC3B,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,aAAa,EAAE,GAAG,MAAM,+HAAA,CAAA,UAAmB,CAAC,gBAAgB;YAEvF,IAAI,KAAK,MAAM,KAAK,SAAS;gBAC3B,MAAM,IAAI,MAAM,KAAK,OAAO;YAC9B;YAEA,QAAQ,GAAG,CAAC,4BAA4B,KAAK,IAAI,CAAC,eAAe;YAEjE,uBAAuB;YACvB,QAAQ,GAAG,CAAC;YACZ,MAAM,UAAU,MAAM,gIAAA,CAAA,UAAa,CAAC,kBAAkB;YAEtD,+BAA+B;YAC/B,aAAa,OAAO,CAAC,eAAe,QAAQ,UAAU;YACtD,aAAa,OAAO,CAAC,mBAAmB,KAAK,IAAI,CAAC,eAAe;YACjE,aAAa,OAAO,CAAC,gBAAgB;YACrC,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC,KAAK,IAAI;YAE1D,iCAAiC;YACjC,IAAI,KAAK,IAAI,CAAC,eAAe,IAAI,aAAa;gBAC5C,QAAQ,GAAG,CAAC,mDAAmD,KAAK,IAAI,CAAC,eAAe;gBACxF,QAAQ,GAAG,CAAC,kCAAkC,CAAC,CAAC;gBAChD,QAAQ,GAAG,CAAC,8BAA8B,QAAQ,SAAS,CAAC,SAAS,CAAC,GAAG,MAAM;gBAE/E,IAAI,gBAAgB;gBAEpB,IAAI;oBACF,MAAM,eAAe,MAAM,gIAAA,CAAA,UAAgB,CAAC,eAAe,CAAC,QAAQ,SAAS,EAAE;oBAC/E,QAAQ,GAAG,CAAC,4CAA4C,aAAa,EAAE;oBACvE,gBAAgB;gBAElB,EAAE,OAAO,UAAU;oBACjB,QAAQ,KAAK,CAAC,yBAAyB,SAAS,OAAO;oBAEvD,0CAA0C;oBAC1C,IAAI;wBACF,QAAQ,GAAG,CAAC;wBACZ,MAAM,UAAU,MAAM,+HAAA,CAAA,UAAmB,CAAC,gBAAgB;wBAC1D,MAAM,aAAa,QAAQ,WAAW;wBAEtC,IAAI,eAAe,aAAa;4BAC9B,MAAM,cAAc,MAAM,gIAAA,CAAA,UAAgB,CAAC,eAAe,CAAC,QAAQ,SAAS,EAAE;4BAC9E,QAAQ,GAAG,CAAC,4BAA4B,YAAY,EAAE;4BACtD,aAAa,OAAO,CAAC,gBAAgB;4BACrC,gBAAgB;wBAClB;oBACF,EAAE,OAAO,YAAY;wBACnB,QAAQ,KAAK,CAAC,wBAAwB,WAAW,OAAO;oBAC1D;gBACF;gBAEA,uBAAuB;gBACvB,IAAI,eAAe;oBACjB,WAAW;wBACT,IAAI;4BACF,MAAM,OAAO,MAAM,gIAAA,CAAA,UAAgB,CAAC,mBAAmB,CAAC,KAAK,IAAI,CAAC,eAAe;4BACjF,QAAQ,GAAG,CAAC,oBAAoB,KAAK,MAAM,EAAE;wBAC/C,EAAE,OAAO,aAAa;4BACpB,QAAQ,KAAK,CAAC;wBAChB;oBACF,GAAG;gBACL,OAAO;oBACL,QAAQ,KAAK,CAAC;gBAChB;YACF,OAAO;gBACL,QAAQ,IAAI,CAAC;gBACb,QAAQ,GAAG,CAAC,qCAAqC,KAAK,IAAI,CAAC,eAAe;gBAC1E,QAAQ,GAAG,CAAC,uBAAuB,CAAC,CAAC;YACvC;YAEA,OAAO;gBACL,SAAS;gBACT,MAAM;oBACJ,GAAG,KAAK,IAAI;oBACZ,KAAK,OAAO,KAAK,IAAI,CAAC,EAAE;gBAC1B;gBACA,SAAS;YACX;QAEF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wBAAwB;YACtC,OAAO;gBACL,SAAS;gBACT,OAAO,MAAM,OAAO;YACtB;QACF;IACF;IAEA,MAAM,SAAS;QACb,IAAI;YACF,MAAM,+HAAA,CAAA,UAAmB,CAAC,OAAO;YAEjC,wBAAwB;YACxB,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YAExB,OAAO;gBAAE,SAAS;YAAK;QACzB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kBAAkB;YAChC,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;QAChD;IACF;IAEA,iBAAiB;QACf,IAAI;YACF,MAAM,WAAW,aAAa,OAAO,CAAC;YACtC,OAAO,WAAW,KAAK,KAAK,CAAC,YAAY;QAC3C,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,OAAO;QACT;IACF;IAEA,kBAAkB;QAChB,OAAO,CAAC,CAAC,IAAI,CAAC,cAAc;IAC9B;IAEA,iBAAiB;QACf,OAAO,aAAa,OAAO,CAAC;IAC9B;IAEA,gBAAgB;QACd,OAAO,aAAa,OAAO,CAAC;IAC9B;IAEA,gCAAgC;IAChC,MAAM,kBAAkB;QACtB,OAAO,MAAM,CAAA,GAAA,+HAAA,CAAA,kBAAe,AAAD;IAC7B;AACF;AAEA,MAAM,cAAc,IAAI;uCACT","debugId":null}},
    {"offset": {"line": 415, "column": 0}, "map": {"version":3,"sources":["file:///Users/aviasnani/Desktop/computer%20demo/cs-demo/repo/frontend/src/components/AuthForm.js"],"sourcesContent":["\"use client\"\nimport React, { useState } from 'react';\nimport { MessageCircle, User, Mail, Lock, Eye, EyeOff, AlertCircle, CheckCircle } from 'lucide-react';\nimport { clsx } from 'clsx';\nimport authService from '../services/authService';\n\nexport default function AuthForm({ onSuccess }) {\n  const [isLogin, setIsLogin] = useState(true);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  \n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    username: '',\n    display_name: ''\n  });\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    // Clear errors when user starts typing\n    if (error) setError('');\n    if (success) setSuccess('');\n  };\n\n  const validateForm = () => {\n    if (!formData.email || !formData.password) {\n      setError('Email and password are required');\n      return false;\n    }\n\n    if (!isLogin) {\n      if (!formData.username || !formData.display_name) {\n        setError('All fields are required for registration');\n        return false;\n      }\n      \n      if (formData.password.length < 6) {\n        setError('Password must be at least 6 characters long');\n        return false;\n      }\n      \n      if (formData.username.length < 3) {\n        setError('Username must be at least 3 characters long');\n        return false;\n      }\n    }\n\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(formData.email)) {\n      setError('Please enter a valid email address');\n      return false;\n    }\n\n    return true;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) return;\n\n    setLoading(true);\n    setError('');\n    setSuccess('');\n\n    try {\n      const endpoint = isLogin ? '/api/auth/login' : '/api/auth/register';\n      const backendUrl = process.env.NEXT_PUBLIC_WEBSOCKET_URL || 'http://localhost:5000';\n      \n      const response = await fetch(`${backendUrl}${endpoint}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        credentials: 'include',\n        body: JSON.stringify(formData)\n      });\n\n      const data = await response.json();\n\n      if (data.status === 'success') {\n        setSuccess(data.message);\n        \n        // Create user object for the app\n        const user = {\n          uid: data.data.user_id.toString(),\n          email: data.data.email,\n          displayName: data.data.display_name,\n          username: data.data.username,\n          photoURL: data.data.profile_picture,\n          accessToken: 'local-auth-token'\n        };\n        \n        // Call success callback with user data\n        onSuccess(user);\n        \n      } else {\n        setError(data.message || 'Authentication failed');\n      }\n    } catch (err) {\n      console.error('Auth error:', err);\n      setError('Network error. Please check your connection and try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGitHubLogin = async () => {\n    setLoading(true);\n    setError('');\n    setSuccess('');\n    \n    try {\n      const result = await authService.loginWithGitHub();\n      \n      if (result.success) {\n        setSuccess('GitHub login successful!');\n        onSuccess(result.user);\n      } else {\n        setError(result.error || 'GitHub login failed');\n      }\n    } catch (error) {\n      setError('GitHub login failed: ' + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const toggleMode = () => {\n    setIsLogin(!isLogin);\n    setError('');\n    setSuccess('');\n    setFormData({\n      email: '',\n      password: '',\n      username: '',\n      display_name: ''\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4\">\n      <div className=\"max-w-md w-full space-y-8\">\n        <div className=\"text-center\">\n          <div className=\"mx-auto h-16 w-16 bg-blue-600 rounded-full flex items-center justify-center\">\n            <MessageCircle className=\"h-8 w-8 text-white\" />\n          </div>\n          <h2 className=\"mt-6 text-3xl font-bold text-gray-900\">\n            {isLogin ? 'Welcome Back' : 'Create Account'}\n          </h2>\n          <p className=\"mt-2 text-sm text-gray-600\">\n            {isLogin \n              ? 'Sign in to continue to your encrypted chat' \n              : 'Join our secure messaging platform'\n            }\n          </p>\n        </div>\n\n        <div className=\"bg-white py-8 px-6 shadow-lg rounded-lg\">\n          {error && (\n            <div className=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-md flex items-start space-x-3\">\n              <AlertCircle className=\"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0\" />\n              <div className=\"text-sm text-red-700\">{error}</div>\n            </div>\n          )}\n\n          {success && (\n            <div className=\"mb-4 p-4 bg-green-50 border border-green-200 rounded-md flex items-start space-x-3\">\n              <CheckCircle className=\"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0\" />\n              <div className=\"text-sm text-green-700\">{success}</div>\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {!isLogin && (\n              <>\n                <div>\n                  <label htmlFor=\"display_name\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Full Name\n                  </label>\n                  <div className=\"relative\">\n                    <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                    <input\n                      id=\"display_name\"\n                      name=\"display_name\"\n                      type=\"text\"\n                      value={formData.display_name}\n                      onChange={handleInputChange}\n                      className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      placeholder=\"Enter your full name\"\n                      disabled={loading}\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <label htmlFor=\"username\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Username\n                  </label>\n                  <div className=\"relative\">\n                    <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                    <input\n                      id=\"username\"\n                      name=\"username\"\n                      type=\"text\"\n                      value={formData.username}\n                      onChange={handleInputChange}\n                      className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      placeholder=\"Choose a username\"\n                      disabled={loading}\n                    />\n                  </div>\n                </div>\n              </>\n            )}\n\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Email Address\n              </label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  value={formData.email}\n                  onChange={handleInputChange}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"Enter your email\"\n                  disabled={loading}\n                />\n              </div>\n            </div>\n\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Password\n              </label>\n              <div className=\"relative\">\n                <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type={showPassword ? 'text' : 'password'}\n                  value={formData.password}\n                  onChange={handleInputChange}\n                  className=\"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder={isLogin ? \"Enter your password\" : \"Create a password (min 6 chars)\"}\n                  disabled={loading}\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\n                  disabled={loading}\n                >\n                  {showPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\n                </button>\n              </div>\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className={clsx(\n                \"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white transition-colors duration-200\",\n                loading\n                  ? \"bg-gray-400 cursor-not-allowed\"\n                  : \"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              )}\n            >\n              {loading ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3\"></div>\n                  {isLogin ? 'Signing in...' : 'Creating account...'}\n                </>\n              ) : (\n                isLogin ? 'Sign In' : 'Create Account'\n              )}\n            </button>\n          </form>\n\n          <div className=\"mt-6\">\n            <div className=\"relative\">\n              <div className=\"absolute inset-0 flex items-center\">\n                <div className=\"w-full border-t border-gray-300\" />\n              </div>\n              <div className=\"relative flex justify-center text-sm\">\n                <span className=\"px-2 bg-white text-gray-500\">Or continue with</span>\n              </div>\n            </div>\n\n            <div className=\"mt-6\">\n              <button\n                type=\"button\"\n                onClick={handleGitHubLogin}\n                disabled={loading}\n                className=\"w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                <svg className=\"w-5 h-5 mr-3\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                  <path d=\"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z\"/>\n                </svg>\n                Continue with GitHub\n              </button>\n            </div>\n          </div>\n\n          <div className=\"mt-6 text-center\">\n            <button\n              onClick={toggleMode}\n              disabled={loading}\n              className=\"text-sm text-blue-600 hover:text-blue-800 underline disabled:opacity-50\"\n            >\n              {isLogin \n                ? \"Don't have an account? Sign up\" \n                : \"Already have an account? Sign in\"\n              }\n            </button>\n          </div>\n\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-xs text-gray-500\">\n              By {isLogin ? 'signing in' : 'creating an account'}, you agree to our terms of service and privacy policy.\n              All messages are end-to-end encrypted for your security.\n            </p>\n          </div>\n        </div>\n\n        <div className=\"text-center\">\n          <p className=\"text-sm text-gray-600\">\n            ðŸ”’ Secure â€¢ ðŸ“± Mobile Ready â€¢ âš¡ Real-time\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1053, "column": 0}, "map": {"version":3,"sources":["file:///Users/aviasnani/Desktop/computer%20demo/cs-demo/repo/frontend/src/app/login/page.js"],"sourcesContent":["\"use client\"\nimport React, { useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '../../context/AuthContext';\nimport AuthForm from '../../components/AuthForm';\n\nexport default function LoginPage() {\n  const router = useRouter();\n  const { currentUser, loading: authLoading, login, keyInitialization } = useAuth();\n\n  // Redirect if already logged in\n  useEffect(() => {\n    if (!authLoading && currentUser) {\n      router.replace('/chat');\n    }\n  }, [currentUser, authLoading, router]);\n\n  const handleAuthSuccess = async (user) => {\n    // Use the login function from AuthContext to initialize keys\n    await login(user);\n    \n    // Redirect to chat after successful login and key initialization\n    router.push('/chat');\n  };\n\n  // Show loading while checking auth state\n  if (authLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Don't render login form if user is already authenticated\n  if (currentUser) {\n    return null;\n  }\n\n  return (\n    <>\n      <AuthForm onSuccess={handleAuthSuccess} />\n      \n      {/* Key Initialization Progress Overlay */}\n      {keyInitialization.isInitializing && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-sm w-full mx-4\">\n            <div className=\"text-center\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                Setting up encryption\n              </h3>\n              <p className=\"text-sm text-gray-600 mb-4\">\n                {keyInitialization.status}\n              </p>\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${keyInitialization.progress}%` }}\n                ></div>\n              </div>\n              <p className=\"text-xs text-gray-500 mt-2\">\n                This may take a few seconds...\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* Key Initialization Error */}\n      {keyInitialization.error && (\n        <div className=\"fixed bottom-4 right-4 bg-red-50 border border-red-200 rounded-lg p-4 max-w-sm\">\n          <div className=\"flex items-start space-x-3\">\n            <div className=\"flex-shrink-0\">\n              <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n              </svg>\n            </div>\n            <div>\n              <h4 className=\"text-sm font-medium text-red-800\">\n                Encryption Setup Failed\n              </h4>\n              <p className=\"text-sm text-red-700 mt-1\">\n                {keyInitialization.error}\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AAJA;;;;;;AAMe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,WAAW,EAAE,SAAS,WAAW,EAAE,KAAK,EAAE,iBAAiB,EAAE,GAAG,CAAA,GAAA,6HAAA,CAAA,UAAO,AAAD;IAE9E,gCAAgC;IAChC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,eAAe,aAAa;YAC/B,OAAO,OAAO,CAAC;QACjB;IACF,GAAG;QAAC;QAAa;QAAa;KAAO;IAErC,MAAM,oBAAoB,OAAO;QAC/B,6DAA6D;QAC7D,MAAM,MAAM;QAEZ,iEAAiE;QACjE,OAAO,IAAI,CAAC;IACd;IAEA,yCAAyC;IACzC,IAAI,aAAa;QACf,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;;;;;;IAI1C;IAEA,2DAA2D;IAC3D,IAAI,aAAa;QACf,OAAO;IACT;IAEA,qBACE;;0BACE,8OAAC,6HAAA,CAAA,UAAQ;gBAAC,WAAW;;;;;;YAGpB,kBAAkB,cAAc,kBAC/B,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAG,WAAU;0CAA2C;;;;;;0CAGzD,8OAAC;gCAAE,WAAU;0CACV,kBAAkB,MAAM;;;;;;0CAE3B,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCACC,WAAU;oCACV,OAAO;wCAAE,OAAO,GAAG,kBAAkB,QAAQ,CAAC,CAAC,CAAC;oCAAC;;;;;;;;;;;0CAGrD,8OAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;;;;;;;;;;;YASjD,kBAAkB,KAAK,kBACtB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;gCAAuB,SAAQ;gCAAY,MAAK;0CAC7D,cAAA,8OAAC;oCAAK,UAAS;oCAAU,GAAE;oCAA0N,UAAS;;;;;;;;;;;;;;;;sCAGlQ,8OAAC;;8CACC,8OAAC;oCAAG,WAAU;8CAAmC;;;;;;8CAGjD,8OAAC;oCAAE,WAAU;8CACV,kBAAkB,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;AAQxC","debugId":null}}]
}